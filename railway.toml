# Railway.app Configuration for LibreChat with A4F Integration
# 
# IMPORTANT: Railway cannot easily deploy LibreChat from source because
# it has internal packages (@librechat/api, @librechat/data-provider, etc.)
# that need to be built before the app can run.
#
# RECOMMENDED APPROACH: Use Railway's Docker image deployment
# 
# In Railway Dashboard:
# 1. Create a new service
# 2. Select "Docker Image" (not GitHub repo)
# 3. Enter: ghcr.io/danny-avila/librechat:latest
# 4. Add environment variables
# 5. Add MongoDB service

[build]
# Skip build - we'll use the pre-built Docker image
# See instructions below for deploying with Docker image

[deploy]
healthcheckPath = "/health"
healthcheckTimeout = 600
restartPolicyType = "ON_FAILURE"
restartPolicyMaxRetries = 10

# ============================================
# DEPLOYMENT INSTRUCTIONS
# ============================================
# 
# Since LibreChat has complex build requirements, deploy using the
# official Docker image instead:
#
# 1. In Railway Dashboard, click "New" → "Empty Service"
# 2. Go to Settings → Source
# 3. Select "Docker Image"
# 4. Enter: ghcr.io/danny-avila/librechat:latest
# 5. Go to Variables and add all required environment variables
# 6. Add MongoDB service: New → Database → MongoDB
# 7. Link MongoDB: MONGO_URI=${{MongoDB.MONGO_URL}}
#
# Required Environment Variables:
# - MONGO_URI=${{MongoDB.MONGO_URL}}
# - JWT_SECRET (generate with: openssl rand -hex 32)
# - JWT_REFRESH_SECRET (generate with: openssl rand -hex 32)
# - CREDS_KEY (generate with: openssl rand -hex 32)
# - CREDS_IV (generate with: openssl rand -hex 16)
# - A4F_API_KEY (your A4F API key)
# - HOST=0.0.0.0
# - PORT=3080
# - ALLOW_REGISTRATION=true